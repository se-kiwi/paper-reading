# Network

## 【物理层】同轴电缆 VS. 双绞线 VS. 光缆 VS.无线介质

### 概要介绍

- #### 同轴电缆：

  > ​	同轴电缆是由一层层的绝缘线包裹着中央铜导体的电缆线，它的最大特点就是抗干扰能力好，传输数据稳定，而且价格也便宜，所以一度被广泛使用，如闭路电视线等。

  **优势：**价格便宜、抗干扰能力好

  **劣势：**传输速率慢、维护困难*(单条电缆的损坏可能导致整个网络瘫痪)*。

- #### 双绞线：

  > ​	双绞线是一种柔性的通信电缆，包含着成对的绝缘铜线，它的特点是价格便宜，所以被广泛应用，如我们常见的电话线等。根据最大传输速率的不同，双绞线可分为3类、5类及超5类。3类双绞线的速率为10mb/s，5类可达100mb/s，而超5类则高达155mb/s以上。双绞线还可分为屏蔽双绞线（stp）和非屏蔽双绞线（utp）。stp双绞线虽然速率较低（只有4mb/s），但抗干扰性比utp双绞线强。

  **优势：**价格便宜，应用广泛	

  **劣势：**传输速率受限，抗干扰性差，传输距离较短

- #### 光缆：

  > ​	光纤光缆是新一代的传输介质，与铜质介质相比，光纤无论是在安全性、可靠性还是网络性能方面都有了很大的提高。除此之外，光纤传输的带宽大大超出铜质线缆，而且其支持的最大连接距离达两公里以上，是组建较大规模网络的必然选择。由于光纤光缆具有抗电磁干扰性好、保密性强、速度快、传输容量大等优点。目前比较常见的有两种不同类型的光纤，分别是单模光纤和多模光纤（所谓"模"就是指以一定的角度进入光纤的一束光线）。多模光纤一般被用于同一办公楼或距离相对较近的区域内的网络连接。而单模光纤传递数据的质量更高，传输距离更长，通常被用来连接办公楼之间或地理分散更广的网络。

  **优势：**速度快，保密性强，抗干扰性好，传输距离长

  **劣势：**价格贵，需要专门的收发设备

- #### 无线介质：

  > ​	无线网络（wireless network）是采用无线通信技术实现的网络。无线网络既包括允许用户建立远距离无线连接的全球语音和数据网络，也包括为近距离无线连接进行优化的红外线技术及射频技术，主流应用的无线网络分为通过公众移动通信网实现的无线网络（如4G，3G或GPRS）和无线局域网（WiFi）两种方式。

  **优势：**连接便捷，维护方便

  **劣势:**抗干扰性差，传输距离受限，组网成本较高

### 指标对比

|              | 介质       |          传输速度          | 最大传输距离  |    成本    |
| ------------ | :--------- | :------------------------: | ------------- | :--------: |
| **同轴电缆** | 铜（电）   |        2～20M bps。        | 185-500米     |  1-3元/米  |
| **双绞线**   | 铜（电）   | 10(3类线)~155Mbps（超5类） | 100米         | 0.8-8元/米 |
| **光缆**     | 玻璃（光） |          1~40Gbps          | 100米~400千米 |  2-8元/米  |
| **无线介质** | 微波、红外 |       50Mbps~10Gbps        | 50米~2千米    |     -      |
### 选择建议

- 长距离网络布线：光缆
- 室内网络布线：双绞线、无线网络
- 高带宽要求：光缆

## 【数据链路层】网卡

### 概要介绍

> ​	网卡是工作在链路层的网络组件，是局域网中连接计算机和传输介质的接口，不仅能实现与局域网传输介质之间的物理连接和电信号匹配，还涉及帧的发送与接收、帧的封装与拆封、介质访问控制、数据的编码与解码以及数据缓存的功能等。

​	网卡的主要功能有：数据的封装与解封，链路管理以及编码译码。

​	随着网络的发展，网卡也发展出许多不同的种类和类型：

1. **按适用计算机种类：**分为标准以太网卡和PCMCIA网卡，其中PCMCIA是用于笔记本电脑的网卡。
2. **按适用传播介质：**分为普通网卡和光纤网卡，光纤一般通过光纤线缆与光纤以太网交换机连接。
3. **按传播速率：** 分为10Mbps网卡、100Mbps网卡、10/100Mbps自适应网卡和1000Mbps网卡，至于光纤网卡可达到10Gbps。
4. **按支持总线类型：**主要可以分为ISA、EISA、PCI等。

### 评价指标

1. **传输速率**：这是最直接的评价指标，一般会选取传输速率符合自己要求的网卡。
2. **芯片性能：**网卡工作涉及到大量的包处理，一个高效能的芯片能快速计算流经网卡的数据，从而减轻CPU的负担。
3. **总线类型：**总线类型决定了I/O的快慢，总线类型要与自己的主板相匹配，一般来讲PCI总线的网卡速率较快，而PCI-X总线的网卡相较PCI又有提升。

## 【数据链路层&网络层】交换机VS.路由器

### 概要介绍

​	很多人分不清交换机和路由器的，交换机和路由器分别工作在数据链路层和网络层，是功能不同的网络设备。

|          |           交换机           |               路由器               |
| -------- | :------------------------: | :--------------------------------: |
| 工作层次 |         数据链路层         |               网络层               |
| 寻址方式 |      根据设备MAC地址       |               IP地址               |
| 速度     |             快             |                 慢                 |
| 广播域   | 数据包在所有相连网段上传播 | 可以分割广播域，各个广播域不能交流 |

- #### 交换机：

  > ​	交换（switching）是按照通信两端传输信息的需要，用人工或设备自动完成的方法，把要传输的信息送到符合要求的相应路由上的技术的统称。交换机根据工作位置的不同，可以分为广域网交换机和局域网交换机。广域的交换机（switch）就是一种在通信系统中完成信息交换功能的设备，它应用在数据链路层。交换机有多个端口，每个端口都具有桥接功能，可以连接一个局域网或一台高性能服务器或工作站。交换机工作于OSI参考模型的第二层，即数据链路层。交换机内部的CPU会在每个端口成功连接时，通过将MAC地址和端口对应，形成一张MAC表。在今后的通讯中，发往该MAC地址的数据包将仅送往其对应的端口，而不是所有的端口。因此，交换机可用于划分数据链路层广播，即冲突域；但它不能划分网络层广播，即广播域。

  **主要功能：**完成同一子网段内数据的快速传输，主流的交换机端口速率为100Mbps,光纤交换机最高可达100Gbps

  **主要供应商：**华为以及思科（Cisco）

- #### 路由器：

  > ​	路由器（Router），是连接因特网中各局域网、广域网的设备，它会根据信道的情况自动选择和设定路由，以最佳路径，按前后顺序发送信号。路由器是互联网的主要结点设备。路由器通过路由决定数据的转发。转发策略称为路由选择（routing），这也是路由器名称的由来（router，转发者）。作为不同网络之间互相连接的枢纽，路由器系统构成了基于TCP/IP 的国际互联网络Internet 的主体脉络，也可以说，路由器构成了Internet的骨架。它的处理速度是网络通信的主要瓶颈之一，它的可靠性则直接影响着网络互连的质量

  **主要功能**：路由器的功能更多的体现在不同类型网络之间的互联上，如局域网与广域网之间的连接、不同协议的网络之间的连接等，所以路由器主要是用于不同类型的网络之间。它最主要的功能就是路由转发，解决好各种复杂路由路径网络的连接就是它的最终目的。相较于交互机，路由器转发速度较慢，主流路由器的端口速率在百兆左右，最高可以达到8Gbps。

  **主要设备供应商**：H3C、华为、TP-LINK

### 评价指标

- #### 交换机：

  - **背板带宽**：  背板是交换机输入端和输出端之间的物理通道。背板带宽越宽，交换机数据处理速度就越快，数据包转发延迟越小，性能越优越。
  - **包转发率**：转发能力以能够处理最小包长来衡量，对于以太网最小包为64BYTE，加上帧开销20BYTE，因此最小包为84BYTE。对于1个全双工1000Mbps接口达到线速时要求：转发能力＝`1000Mbps/((64+20)*8bit)＝1.488Mpps`，为了达到无阻塞包交换，一台24千兆端口交换机，包转发率要达到`24*1.488Mpps=35.712Mpps`，才能保证所有端口线速工作时，提供无阻塞的包交换。
  - **支持VLAN能力**：交换机是否支持VLAN（虚拟局域网 Virtual Local Aera Network）是用户关注的重要指标值之一。
  - **全双工端口带宽**： 全双工端口带宽的计算方法是：`端口数 * 端口速率 * 2`。交换机选型的一个重要参数是：背板带宽/全双工端口带宽。比值越大，交换机就越能趋近高性能无阻塞的交换。

  主流交换机对比：

  | 型号     | 3COM 3C16476A    | 华为 S2326TP-EI(AC）   | 思科 WS-C2918-24TT-C   |
  | -------- | ---------------- | ---------------------- | ---------------------- |
  | 产品类型 | 快速以太网交换机 | 运营级千兆以太网交换机 | 二层千兆级以太网交换机 |
  | 背板带宽 | 8.8Gbps          | 32Gpbs                 | 16Gpbs                 |
  | 包转发率 | 6.6Mpps          | 6.6Mpps                | 10.1Mpps               |
  | VALN支持 | 不支持           | 支持                   | 支持                   |
  | 接口数   | 50               | 26                     | 26                     |
  | 传输速率 | 10/100/1000Mpbs  | 10/100/1000Mpbs        | 10/100/1000Mpbs        |

- #### 路由器：

  - **CPU、内存：**路由器依靠CPU和内存来交互路由信息和查询路由表，所以CPU和内存一定程度上代表了路由器的性能
  - **路由协议支持:**路由器作为连接不同类型网络的节点，对不同网络协议的支持表现了其功能性能。
  - **全双工线速转发能力：**路由器最基本且最重要的功能是数据包转发。在同样端口速率下转发小包是对路由器包转发能力最大的考验。因此，该指标是路由器性能重要指标。
  - **路由表能力：** 路由器通常依靠所建立及维护的路由表来决定如何转发。路由表能力是指路由表内所容纳路由表项数量的极限。由于Internet上执行BGP协议的路由器通常拥有数十万条路由表项，所以该项目也是路由器能力的重要体现。
  - **QOS支持：**  QoS的英文全称为"Quality of Service"，中文名为"服务质量"。QoS是网络的一种安全机制, 是用来解决网络延迟和阻塞等问题的一种技术

## 【网络层】 IPv4 -> IPv6

### 概要介绍

- #### IPv4:

  > ​	IPv4，是互联网协议（Internet Protocol，IP）的第四版，也是第一个被广泛使用，构成现今互联网技术的基础的协议。1981年 Jon Postel 在RFC791中定义了IP，Ipv4可以运行在各种各样的底层网络上，比如端对端的串行数据链路(PPP协议和SLIP协议) ，卫星链路等等。局域网中最常用的是以太网。

  **Ipv4存在的问题：**地址资源不足，配置繁琐，安全性差，性能上的局限

- #### IPv6:



  > ​	IPv6是Internet Protocol Version 6的缩写，其中Internet Protocol译为“互联网协议”。IPv6是IETF（互联网工程任务组，Internet Engineering Task Force）设计的用于替代现行版本IP协议（IPv4）的下一代IP协议，号称可以为全世界的每一粒沙子编上一个网址  。 由于IPv4最大的问题在于网络地址资源有限，严重制约了互联网的应用和发展。IPv6的使用，不仅能解决网络地址资源数量的问题，而且也解决了多种接入设备连入互联网的障碍 。

### 评价对比

|                     |                             IPV4                             |                             IPv6                             |
| ------------------- | :----------------------------------------------------------: | :----------------------------------------------------------: |
| 地址长度            |                        32位（4字节）                         |                       128位（16字节）                        |
| 网络地址转换（NAT） |                             需要                             |                            不需要                            |
| 报文结构            |       根据提供的 IP 选项，有 20-60 个字节的可变长度。        | 40 个字节的固定长度。没有 IP 报头选项。通常，IPv6 报头比 IPv4 报头简单。 |
| IPsec支持           |                             可选                             |                             必须                             |
| 配置                | 必须在进行配置之后才能与其他系统通信；即，必须分配 IP 地址和路由。 |                根据所需的功能，配置是可选的。                |
|                     |                                                              |                                                              |

上表展示了IPv6与IPv4的主要区别，通过多种手段IPv6逐一解决了IPv4中存在的问题。

- **地址资源不足：**地址长度从32位扩展到了128位，地址数量增加2^96倍
- **配置繁琐：**IPv6 可与任何以太网适配器配合使用并且可通过回送接口运行。IPv6 接口是使用 IPv6 无状态自动配置进行自我配置的。这样IPv6可以无需手工或DHCP配置
- **安全性差：**IPv6强制支持IPsec协议，使得网络层安全等级提升。
- **性能的局限：**IPv6优化了报文结构，更简单的报文提升了路由效率。

## 【传输层】TCP  VS.  UDP

### 概要介绍

- #### TCP：

  > ​	TCP（Transmission Control Protocol 传输控制协议）是一种面向连接的、可靠的、基于字节流的传输层通信协议。应用层向TCP层发送用于网间传输的、用8位字节表示的数据流，然后TCP把数据流分区成适当长度的报文段（通常受该计算机连接的网络的数据链路层的最大传输单元（  MTU）的限制）。之后TCP把结果包传给IP层，由它来通过网络将包传送给接收端实体   的TCP层。

  **优势：**数据传输可靠，可以保持连接信息

  **劣势：**速度慢

- #### UDP：

  > ​	UDP是OSI参考模型中一种无连接的传输层协议，它主要用于不要求分组顺序到达的传输中，分组传输顺序的检查与排序由应用层完成   ，提供面向事务的简单不可靠信息传送服务。UDP 协议基本上是IP协议与上层协议的接口。UDP协议适用端口分别运行在同一台设备上的多个应用程序。

  **优势：**传输速度快，支持一对多、多对多传输

  劣势：数据传输不可靠

### 评价对比

![TCP协议与UDP协议对比](./pic/20170506211339044.png)

### 